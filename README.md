# При возникновении проблем написать в мой телеграмм https://t.me/Bedrosovichhh

# Zhukovsky Site

Веб-приложение для управления турами с интерактивной картой мира на FastAPI.

## Особенности

- Интерактивная карта мира с подсветкой стран
- Админ-панель для управления турами
- Реалтайм обновление карты при изменении туров
- Легковесная SQLite база данных

## Требования

- Python 3.8+
- pip для управления зависимостями

> **Важно**: Приложение использует SQLite, поэтому установка внешних систем управления базами данных не требуется.

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/ArmPump/zhukovsky-site.git
cd zhukovsky-site
```

### 2. Создание виртуального окружения

```bash
python -m venv venv
```

### 3. Активация виртуального окружения

**Windows:**
```bash
venv\Scripts\activate
```

**Linux/MacOS:**
```bash
source venv/bin/activate
```

### 4. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 5. Заполнение базы данных

Перед первым запуском необходимо создать базу данных и заполнить её тестовыми данными:

```bash
python app/backend/seed_data.py
```

Эта команда:
- Создаст файл базы данных `tours.db` в корневой директории
- Создаст все необходимые таблицы
- Заполнит базу тестовыми турами и странами

### 6. Запуск приложения

```bash
python app/backend/run.py
```

ЗАХОД НА САЙТ КОГДА BACKEND УЖЕ ВКЛЮЧЕН:
- **Чтобы запустить frontend просто в редакторе кода, либо на рабочем столе нажимаем index.html и открываем его в браузере**
- **Главная страница backend**: http://localhost:8000
- **API документация (Swagger)**: http://localhost:8000/docs
- **API документация (ReDoc)**: http://localhost:8000/redoc

## Работа с приложением

### Доступ к админ-панели

Для доступа к функциям администратора:

1. Откройте главную страницу сайта (http://localhost:8000)
2. Найдите кнопку или форму авторизации
3. Введите email администратора:
   - **Email**: `admin@zhukovsky.com`
   - **Пароль**: любой (пароли не проверяются)
4. После входа в профиле появится плашка **"Админ-панель"**

> **Примечание**: Аутентификация реализована упрощенно - пароли не проверяются на backend. Это тестовая версия для демонстрации.

### Возможности админ-панели

В админ-панели доступны следующие функции:

- **Создание новых туров** - добавление новых туристических направлений
- **Удаление туров** - удаление существующих туров из базы

> **Важно**: Редактирование туров не реализовано. Для изменения информации о туре необходимо удалить старый и создать новый.

### Интерактивная карта

При работе с турами карта обновляется автоматически:

- **Создание тура**: тур сразу отображается на карте без перезагрузки
- **Подсветка стран**: страны автоматически подсвечиваются при добавлении новых направлений
- **Удаление тура**: карта обновляется в реальном времени, убирая подсветку с удаленных направлений

Карта реагирует на все изменения мгновенно, предоставляя интуитивный интерфейс для управления турами.

## Структура проекта

```
zhukovsky-site/
├── app/
│   ├── backend/
│   │   ├── models/          # Модели базы данных
│   │   ├── repositories/    # Репозитории для работы с БД
│   │   ├── routers/         # API роутеры
│   │   ├── schemas/         # Pydantic схемы
│   │   ├── services/        # Бизнес-логика
│   │   ├── config.py        # Конфигурация
│   │   ├── database.py      # Настройка БД
│   │   ├── main.py          # Главный файл FastAPI
│   │   ├── run.py           # Скрипт запуска
│   │   └── seed_data.py     # Заполнение БД
│   ├── frontend/        # Frontend код (HTML/CSS/JS)
│   └── .env             # Переменные окружения
├── tours.db            # SQLite база данных (создается автоматически)
├── requirements.txt    # Python зависимости
├── .gitignore
└── README.md
```

## Основные зависимости

- **FastAPI** 0.122.0 - современный веб-фреймворк
- **SQLAlchemy** 2.0.44 - ORM для SQLite
- **Uvicorn** 0.38.0 - ASGI-сервер
- **Pydantic** 2.12.4 - валидация данных
- **python-jose** 3.5.0 - JWT токены
- **bcrypt** 5.0.0 - хеширование паролей

## Полезные команды

```bash
# Проверка установленных зависимостей
pip list

# Обновление зависимостей
pip install --upgrade -r requirements.txt

# Перезаполнение базы данных (удалит все данные и заполнит заново)
python app/backend/seed_data.py

# Остановка сервера
Ctrl + C

# Деактивация виртуального окружения
deactivate
```

## Troubleshooting

### Ошибки импорта модулей
- Убедитесь, что виртуальное окружение активировано
- Переустановите зависимости: `pip install -r requirements.txt`
- Проверьте, что вы запускаете скрипт из корневой директории проекта

### Порт уже занят
- Остановите процесс, использующий порт 8000
- Или измените порт в файле `app/backend/run.py`

### Пустая база данных или отсутствует tours.db
- Запустите: `python app/backend/seed_data.py`
- Убедитесь, что скрипт выполнился без ошибок
- Проверьте, что файл `tours.db` появился в корневой директории

### Ошибка доступа к файлу базы данных
- Проверьте права доступа к файлу `tours.db`
- Убедитесь, что файл не открыт в других программах

## Краткий гайд по запуску

```bash
# 1. Клонирование и переход в папку
git clone https://github.com/ArmPump/zhukovsky-site.git
cd zhukovsky-site

# 2. Создание и активация venv
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/MacOS
source venv/bin/activate

# 3. Установка зависимостей
pip install -r requirements.txt

# 4. Заполнение базы данных
python app/backend/seed_data.py

# 5. Запуск приложения
python app/backend/run.py

# 6. Откройте браузер
# http://localhost:8000

# 7. Для доступа к админ-панели войдите как:
# Email: admin@zhukovsky.com
# Пароль: любой
```

## Лицензия

MIT License

## Автор
ArmPump - [GitHub](https://github.com/ArmPump)
